
<!DOCTYPE html>
<html lang="ko">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="hunkee&#39;s blog">
    <title>hunkee&#39;s blog</title>
    <meta name="author" content="hunkee1017@gmail.com">
    
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"Website","@id":"http://hunkee1017.github.io","author":{"@type":"Person","name":"hunkee1017@gmail.com","sameAs":["https://github.com/hunkee1017","https://www.linkedin.com/in/hunkee-kang-67357a166/","mailto:hunkee1017@gmail.com"]},"name":"hunkee's blog","description":"기술 블로그","url":"http://hunkee1017.github.io"}</script>
    <meta name="description" content="기술 블로그">
<meta property="og:type" content="blog">
<meta property="og:title" content="hunkee&#39;s blog">
<meta property="og:url" content="http://hunkee1017.github.io/index.html">
<meta property="og:site_name" content="hunkee&#39;s blog">
<meta property="og:description" content="기술 블로그">
<meta property="og:locale" content="ko">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="hunkee&#39;s blog">
<meta name="twitter:description" content="기술 블로그">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/blog/assets/css/style-c4ozcsklz4kht2pebhp44xorvyverh23toayhn7i6ubrpyedak24hv1v0hyd.min.css">
    <!--STYLES END-->
    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/blog/ ">hunkee&#39;s blog</a>
    </div>
    
        
            <a class="header-right-picture " href="#about">
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/blog/ " title="Home">
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/blog/all-categories" title="Categories">
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/blog/all-tags" title="Tags">
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link open-algolia-search" href="#search" title="Search">
                    
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://github.com/hunkee1017" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://www.linkedin.com/in/hunkee-kang-67357a166/" target="_blank" rel="noopener" title="LinkedIn">
                    
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="mailto:hunkee1017@gmail.com" target="_blank" rel="noopener" title="Mail">
                    
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/blog/atom.xml" title="RSS">
                    
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/blog/redis-overview/">
                            Redis Overview(with Spring Boot)
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-01-04T16:29:07+09:00">
	
		    1월 04, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/blog/categories/post/">post</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p><strong>Redis</strong>는 Key/Value형태의 In-Memory 데이터베이스로서 데이터 저장 및 캐싱, 그리고 메시지 브로커로 널리 사용 되고 있습니다.</p>
<p><strong>Redis</strong>의 가장 큰 특징으로는 In-Memory 데이터베이스가 가지는 장점인 처리속도가 굉장히 빠르다는 점이 있습니다. 물론 이것 자체는 휘발성 데이터이기 때문에 케이스에 따라서 데이터를 덤프하는 스케쥴링을 통해 정합성 및 영속성을 관리할 수 있습니다. 하지만 이것도 불안하다 싶어 조금 더 나아간다면 고가용성을 보장하기 위해 Master-Slave 구조의 아키텍쳐링까지 설계할 수 있습니다. </p>
<p>또한, <strong>Redis</strong>의 내부를 열어보면 데이터 스트럭쳐로 String, Hash, List, Sets, Sorted Sets등 기본적인 쿼리 뿐만 아니라 Bitmaps, Hyperloglogs, Geospatial indexes와 같은 Radius 쿼리까지도 지원하는 등 강력한 기능이 있습니다.</p>
<p>Pivotal에서도 강력한 <strong>Redis</strong>의 기능을 사용하기 위해 Spring Boot를 통해 손쉽게 여러 프로젝트와 연결할 수 있는 방법을 가이드 하고 있습니다.</p>
<p><strong>지금부터는 이런 Redis를 Spring Boot에서 사용하는 방법을 알아보겠습니다.</strong></p>
<blockquote>
<p>Spring Boot, Maven를 사용해서 작성했습니다.</p>
</blockquote>
<h3 id="Redis-Dependency-추가"><a href="#Redis-Dependency-추가" class="headerlink" title="Redis Dependency 추가"></a>Redis Dependency 추가</h3><hr>
<p>Redis를 Spring-boot에서 사용하기 위해서는 가장 먼저 Redis의 Dependency를 추가해야합니다.</p>
<blockquote>
<p>pom.xml에 다음과 같은 설정을 추가함</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Redis 접속 정보를 property에 등록합니다.</p>
</blockquote>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  redis:</span></span><br><span class="line"><span class="attr">    host:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line"><span class="attr">    port:</span> <span class="number">6379</span></span><br><span class="line"><span class="attr">    password:</span> <span class="string">password</span></span><br></pre></td></tr></table></figure>
<h3 id="Redis-Session"><a href="#Redis-Session" class="headerlink" title="Redis Session"></a>Redis Session</h3><hr>
<p>Redis는 Spring session과 연동하여 Session에 대한 저장소를 Redis로 관리할 수 있습니다.</p>
<p><em>Dependency</em></p>
<blockquote>
<p>pom.xml에 Spring Session을 사용하기 위한 정보를 넣습니다.</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.session<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-session<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><em>Annotation</em></p>
<blockquote>
<p>해당 Spring Session을 Redis로 사용하겠다는 annotation을 넣습니다.</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.session.data.redis.config.annotation.web.http.EnableRedisHttpSession;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableRedisHttpSession</span> <span class="comment">// Redis를 세션형태로 사용하겠다는 설정</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SpringApplication.run(RedisApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em>Property</em></p>
<blockquote>
<p>프로퍼티에서 session의 Store-type을 redis로 설정해줍니다.</p>
</blockquote>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  session:</span></span><br><span class="line"><span class="attr">    store-type:</span> <span class="string">redis</span></span><br></pre></td></tr></table></figure>
<p><em>결과</em></p>
<blockquote>
<p>$redis-cli&gt; keys spring:session*</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&quot;spring:session:sessions:expires:e7e5a693-54b9-489f-b8c2-25c993de7ec9&quot;</span><br><span class="line">&quot;spring:session:expirations:1520229840000&quot;</span><br><span class="line">&quot;spring:session:sessions:e7e5a693-54b9-489f-b8c2-25c993de7ec9&quot;</span><br><span class="line">```    </span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">### Redis Cache</span><br><span class="line"></span><br><span class="line">* * *</span><br><span class="line"></span><br><span class="line">Redis Cache는 Spring Cache를 Redis에서 처리 할 수 있도록 지원합니다.</span><br><span class="line"></span><br><span class="line">*Dependency*</span><br><span class="line">    </span><br><span class="line">&gt; pom.xml에 캐시를 사용하기 위한 Dependency를 추가합니다.</span><br><span class="line"></span><br><span class="line">```xml</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p><em>Annotation</em></p>
<blockquote>
<p>해당 Spring Cache을 Redis로 사용하겠다는 annotation을 넣습니다.</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.annotation.EnableCaching;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableCaching</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SpringApplication.run(RedisApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em>Property</em></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cache:</span></span><br><span class="line"><span class="attr">    type:</span> <span class="string">redis</span></span><br><span class="line"><span class="string">```</span>    </span><br><span class="line">    </span><br><span class="line"><span class="string">*사용하기*</span></span><br><span class="line"></span><br><span class="line"><span class="string">```java</span> </span><br><span class="line"><span class="string">//</span> <span class="string">사용할</span> <span class="string">Cache에</span> <span class="string">대한</span> <span class="string">configuration</span></span><br><span class="line"><span class="string">@CacheConfig(cacheNames="cacheName")</span></span><br><span class="line"></span><br><span class="line"><span class="string">//</span> <span class="string">캐싱을</span> <span class="string">할</span> <span class="string">대상</span> <span class="string">Method에</span> <span class="string">붙여주는</span> <span class="string">Annotation</span></span><br><span class="line"><span class="string">@Cacheable</span></span><br><span class="line"></span><br><span class="line"><span class="string">//</span> <span class="string">캐시된</span> <span class="string">대상을</span> <span class="string">비워줄</span> <span class="string">Method</span> <span class="string">위에</span> <span class="string">붙여주는</span> <span class="string">Annotation</span></span><br><span class="line"><span class="string">@CacheEvict(cacheNames="cacheName")</span></span><br></pre></td></tr></table></figure>
<h3 id="Redis-Transaction"><a href="#Redis-Transaction" class="headerlink" title="Redis Transaction"></a>Redis Transaction</h3><hr>
<p>레디스에서 데이터를 저장할때 트랜잭션을 통해 처리할 수 있도록 설정합니다.</p>
<p>주요 명령어는 <a href="https://redis.io/commands/multi" target="_blank" rel="noopener">MULTI</a> , <a href="https://redis.io/commands/exec" target="_blank" rel="noopener">EXEC</a> , <a href="https://redis.io/commands/discard" target="_blank" rel="noopener">DISCARD</a>, <a href="https://redis.io/commands/watch" target="_blank" rel="noopener">WATCH</a></p>
<ul>
<li>MULTI : 트랜잭션 블록의 시작을 표시. 이 구문 안에 포함된 구문들은 전부 Queue로 넣어진 후 EXEC를 만날 때까지 대기.</li>
<li>EXEC : 이전에 대기중인 모든 명령을 트랜잭션에서 실행 하고 연결 상태를 정상으로 복원.</li>
<li>DISCARD : 이전에 대기중인 모든 명령을 트랜잭션에서 플러시 해버리고 연결 상태를 정상으로 복원.</li>
<li>WATCH : 트랜잭션의 조건부 실행을 감시하는 지정된 키를 마크. 이 watch가 걸려있는 key를 외부에서 접근하려고 시도하면 Discard를 발생시킴.</li>
</ul>
<p>1) Redis Transaction</p>
<blockquote>
<p>명시적으로 사용하기 위해서 커스터마이징을 수행</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// execute a transaction</span></span><br><span class="line">List&lt;Object&gt; txResults = redisTemplate.execute(<span class="keyword">new</span> SessionCallback&lt;List&lt;Object&gt;&gt;() &#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> List&lt;Object&gt; <span class="title">execute</span><span class="params">(RedisOperations operations)</span> <span class="keyword">throws</span> DataAccessException </span>&#123;</span><br><span class="line">    operations.multi();</span><br><span class="line">    operations.opsForSet().add(<span class="string">"key"</span>, <span class="string">"value1"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// This will contain the results of all ops in the transaction</span></span><br><span class="line">    <span class="keyword">return</span> operations.exec();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">System.out.println(<span class="string">"Number of items added to set: "</span> + txResults.get(<span class="number">0</span>));</span><br></pre></td></tr></table></figure>
<p>2) @Transactional Support</p>
<blockquote>
<p>Framework의 Transaction을 사용해서 처리</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Sample Configuration */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisTxContextConfiguration</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> StringRedisTemplate <span class="title">redisTemplate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    StringRedisTemplate template = <span class="keyword">new</span> StringRedisTemplate(redisConnectionFactory());</span><br><span class="line">    <span class="comment">// explicitly enable transaction support</span></span><br><span class="line">    template.setEnableTransactionSupport(<span class="keyword">true</span>);</span><br><span class="line">    <span class="keyword">return</span> template;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> PlatformTransactionManager <span class="title">transactionManager</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> DataSourceTransactionManager(dataSource());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> RedisConnectionFactory <span class="title">redisConnectionFactory</span><span class="params">( // jedis, lettuce, srp,... )</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> DataSource <span class="title">dataSource</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123; <span class="comment">// ... &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li><a href="https://redis.io/topics/transactions" target="_blank" rel="noopener">https://redis.io/topics/transactions</a></li>
<li><a href="https://docs.spring.io/spring-data/redis/docs/1.8.6.RELEASE/reference/html/#redis:pubsub:subscribe" target="_blank" rel="noopener">https://docs.spring.io/spring-data/redis/docs/1.8.6.RELEASE/reference/html/#redis:pubsub:subscribe</a></li>
</ol>
<h3 id="Redis-Persistence"><a href="#Redis-Persistence" class="headerlink" title="Redis Persistence"></a>Redis Persistence</h3><hr>
<p>레디스 데이터의 영속성을 보장하기 위해 Data를 백업하고 관리하는 방법입니다.<br>Redis홈페이지에서 권장하는 방법은 <strong>RDB와 AOF를 모두 사용</strong>하여 데이터 정합성을 보장하는 것입니다.</p>
<p>1) RDB 방식</p>
<ul>
<li><strong>dump.rdb</strong> 이름으로 저장</li>
<li><p><strong>장점</strong></p>
<ul>
<li>원하는 시점에서 복구데이터를 남길 수 있습니다.</li>
<li>재해 복구에 매우 유용.</li>
<li>RDB는 AOF에 비해 큰 데이터 세트를 사용하여 재시작을 빠르게 수행.</li>
</ul>
</li>
<li><p><strong>단점</strong></p>
<ul>
<li>Redis가 작동을 멈춘 경우(예 : 정전 후)에 데이터 손실 가능성을 최소화해야하는 경우 RDB가 좋지 않습니다. (예를 들어 데이터 세트에 대해 최소 5 분 및 100 회 기록 후, 여러 저장 지점을 가질 수 있음).</li>
<li>RDB는 자식 프로세스를 사용하여 디스크에 저장하기 위해 fork ()를 자주 수행 해야 합니다. 데이터 세트가 크면 Fork ()에 시간이 많이 걸릴 수 있으며 CPU 성능이 좋지 않은 경우 Redis는 클라이언트에 수 밀리 초 또는 1 초간 서비스를 제공하지 않을 수 있습니다.</li>
</ul>
</li>
<li><p><em>Synchronously 백업</em></p>
  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> src/redis-cli</span></span><br><span class="line">  127.0.0.1:6379&gt; help save</span><br><span class="line">    SAVE -</span><br><span class="line">    summary: Synchronously save the dataset to disk</span><br><span class="line">    since: 1.0.0</span><br><span class="line">    group: server</span><br><span class="line"></span><br><span class="line">  127.0.0.1:6379&gt; save</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><em>Background 백업</em></p>
  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> src/redis-cli</span></span><br><span class="line">  127.0.0.1:6379&gt; help bgsave</span><br><span class="line">    BGSAVE -</span><br><span class="line">    summary: Asynchronously save the dataset to disk</span><br><span class="line">    since: 1.0.0</span><br><span class="line">    group: server</span><br><span class="line"></span><br><span class="line">  127.0.0.1:6379&gt; bgsave</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>2) AOF 방식</p>
<ul>
<li><strong>appendonly.aof</strong> 이름으로 저장됩니다.</li>
<li><p><strong>장점</strong></p>
<ul>
<li>AOF Redis는 매 초 fsync를 수행하여 데이터 정합성에서 유리하다(1 초의 쓰기 정도만 손실 할 수 있습니다)</li>
<li>AOF 로그는 추가 전용 로그이므로 전원이 중단 될 경우 손상 문제가 없습니다. 어떤 이유로 (디스크가 가득 차거나 다른 이유로) 로그가 절반으로 작성된 명령으로 끝나더라도 redis-check-aof 도구로 쉽게 수정할 수 있습니다.</li>
<li>Redis는 너무 커지면 백그라운드에서 AOF를 자동으로 다시 쓸 수 있어 데이터의 유실이 최소화 됩니다.</li>
<li>AOF에는 이해하기 쉽고 구문 분석 할 수있는 형식으로 차례로 모든 작업의 로그가 포함되어 있습니다. (예를 들어, FLUSHALL 명령을 사용하여 모든 오류를 플러시 했더라도 로그를 다시 작성하지 않으면 서버를 중지하고 최신 명령을 제거한 다음 Redis를 다시 시작하여 데이터 세트를 저장할 수 있습니다.)</li>
</ul>
</li>
<li><p><strong>단점</strong></p>
<ul>
<li>AOF 파일은 대개 동일한 데이터에 해당하는 RDB 파일보다 용량이 큽니다.</li>
<li>AFS는 정확한 fsync 정책에 따라 RDB보다 느릴 수 있습니다.</li>
<li>AOF로 인해 다시로드 할 때 정확히 동일한 데이터 세트가 재현되지 않을 가능성이 있습니다.</li>
</ul>
</li>
<li><p><em>서버 실행할 때 AOF 활성</em></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> src/redis-server --appendonly yes</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><em>Redis-cli에서 AOF 활성</em></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> src/redis-cli</span></span><br><span class="line">  127.0.0.1:6379&gt; help BGREWRITEAOF</span><br><span class="line">    BGREWRITEAOF -</span><br><span class="line">    summary: Asynchronously rewrite the append-only file</span><br><span class="line">    since: 1.0.0</span><br><span class="line">    group: server</span><br><span class="line"></span><br><span class="line">  127.0.0.1:6379&gt; BGREWRITEAOF</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>참조 :</p>
<p><a href="https://redis.io/topics/persistence" target="_blank" rel="noopener">https://redis.io/topics/persistence</a></p>

                    
                        

                    
                    
                        <p>
                            <a href="/blog/redis-overview/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/blog/hello-world/">
                            Hello World
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-01-04T11:17:42+09:00">
	
		    1월 04, 2019
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

                    
                        

                    
                    
                        <p>
                            <a href="/blog/hello-world/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">page 1 of 1</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2019 hunkee1017@gmail.com. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <h4 id="about-card-name">hunkee1017@gmail.com</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/blog/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/blog/assets/js/script-dbd16rvloemmuxdzniplmnxxvwoz24eya9wol0b7vvmlokgqsjivmb8dnscy.min.js"></script>
<!--SCRIPTS END-->



    </body>
</html>
